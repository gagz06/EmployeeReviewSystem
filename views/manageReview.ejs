<link rel="stylesheet" href="/css/manageReview_layout.css">
<div id="empList" style="display: flex; padding: 10px 0px 10px 5px;">
    <div id="assignReview" style="flex: 1; padding: 10px; border: solid; margin-top: 5px;">
        <h2 style="text-align: center;">Ask Feedback for: <i><%=employeeForReview.name%></i></h2>
        <ul style="list-style: none; height: 200px; overflow-y: auto;">
           <% if(employeeList.length>0){%>
            <%for(employee of employeeList){%>
                <li style=" padding: 10px;  border: solid; border-radius: 10px; margin: 5px;">
                    <div style="display: flex;" >
                        <label style="flex: 0.5;"><%= employee.name%></label>
                        <label style="flex: 1; text-align: left;"><%= employee.email%> </label>
                         <% let assignedReviewer = employee.assigned_reviews.filter((a) => { 
                        return a.equals(employeeForReview.id);
                      }); %>  
                        <%if(assignedReviewer.length){%>
                            <a href="" style="text-decoration: none; flex: 0.5; pointer-events: none; color: gray;" >Assigned</a>
                            <%}else{%>
                                <a href="/admin/assignReview/<%=employee._id%>/<%=employeeForReview.id%>" style="text-decoration: none; flex: 0.5; ">Ask for Review </a>
                                <%}%>
                    </div>
                </li>
                <%}%>
           <%}else{%>
            <li>
                <div>
                    <label>No Employee Added</label>
                </div>
            </li>
            <%}%>
        </ul>
    </div>
    <div id="askedFromFeedbackList" style="flex: 1; padding: 10px; border: solid; margin-left: 5px; margin-top: 5px; margin-right: 5px;">
        <h2 style="text-align: center;">
            Feedbacks asked from
        </h2>
        <ul style="list-style: none; height: 200px; overflow-y: auto; margin-right: 10px;">
            <% if(employeeForReview.assigned_reviewers.length){%>
                <% for(i of employeeForReview.assigned_reviewers){%>
                    <li style=" height: 50px; margin-bottom: 5px;  text-align: center; border: solid; border-radius: 10px; ">
                        <div style="display: flex; padding: 5px;">
                            <label style="flex: 1;"><%=i.name%> </label>
                            <%let dateVal = new Date(i.createdAt);
                            let date= (dateVal.toDateString());%>  
                            <label style="flex: 1;"><%=date%></label>
                        </div>
                    </li>
                    <%}%>
                <%}else{%>
                    <li style="border: solid; text-align: center; border-radius: 10px;">
                        <div style="display: flex;">
                            <label style="flex: 1;">Not asked from Anyone</label>
                        </div>
                    </li>
                    <%}%>
        </ul>
    </div>
</div>
<div id="receivedFeedbackList" style="text-align: center; border: solid; margin-left: 5px; margin-right: 5px;">
    <h2 style="margin-top: 5px;">
        Feedbacks Received
    </h2>
<ul style="list-style: none; text-align: center; height: 130px; overflow-y: auto; display: flex; flex-wrap: wrap; flex-direction: row;">
   <%if(reviews.length){%>
    <%for(review of reviews){%>
        <li style=" height: 110px; width: 300px; padding: 10px; border: solid;  border-radius: 10px; margin: 10px;">
            <table >
                
                <tr>
                    <td><label for=""><strong>Feedback By : </strong><%=review.reviewed_by.name%></label><br></td>
                </tr>
                
                <tr>
                    <%let dateVal = new Date(review.createdAt);
                    let date= (dateVal.toDateString());%>  
                    <td><label for=""><strong>Date : </strong><%=date%></label>
                    </td>
                </tr>
                <tr style="text-align: center;">
                    <td>
                        <strong><a href="/admin/update-review/<%=review.id%>/<%=employeeForReview.id%>">Edit</a></strong>
                    </td>
                </tr>
            </table>
          </li>
        <%}%>
    <%}else{%>
        <li>
            <div>
              <h3><label for="">No Reviews Submitted</label></h3>
            </div>
          </li>
        <%}%>
</ul>
</div>
